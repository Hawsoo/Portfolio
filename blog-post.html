<!DOCTYPE html>
<html lang="en">

<head id="head_tag">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <meta property="og:url" content="Poopoo1" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Poopoo3" />
    <meta property="og:description" content="Poopoo4" />
    <meta property="og:image" content="http://www.theartimes.com/wp-content/uploads/2013/03/to_catch_the_moonfish_by_qinni-d5v0kqt-900x300.jpg" />

    <!-- Page attributes -->
    <link rel="shortcut icon" href="images/favicon.png">

    <title>Poopoo3</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Typeahead Fixing CSS -->
    <!--<link href="css/typeahead.css" rel="stylesheet">-->

    <!-- Custom CSS -->
    <link href="css/style-portfolio.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <!-- Navbar -->
    <div id="navbar_insert"></div>

    <!-- Page Content -->
    <div class="container">

        <!-- Page Heading/Breadcrumbs -->
        <div class="row">
            <div class="col-lg-12">
                <h1 id="post_title" class="page-header"></h1>
                <ol class="breadcrumb">
                    <li><a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="blog-home.html">Blog Home</a>
                    </li>
                    <li id="bread_active" class="active"></li>
                </ol>
            </div>
        </div>
        <!-- /.row -->

        <!-- Content Row -->
        <div class="row">

            <!-- Blog Post Content Column -->
            <div class="col-lg-8">

                <!-- Blog Post -->

                <hr>

                <!-- Date/Time -->
                <p id="blog_timestamp"></p>

                <hr>

                <!-- Preview Image -->
                <img id="blog_img_import" class="img-responsive">

                <hr>

                <!-- Blog Content (imported) -->
                <div id="blog_content_import"></div>

                <hr>
                
                <div id="fb_like_insert"></div>

                <hr>

                <!-- Facebook Comments -->
                <div id="fb_comments_insert"></div>

            </div>

            <!-- Blog Sidebar -->
            <div id="blog_sidebar_insert"></div>

        </div>
        <!-- /.row -->

        <hr>

        <!-- Footer -->
        <div id="footer_sitemap"></div>

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Add menu -->
    <script>
        // Add menu
        $(document).ready(function () {
            // Add navbar.html content into any "#navbar_insert" element
            $('#navbar_insert').load('templates/navbar.html', function () {
                // Set component to active once content was loaded
                $('#navbar_blog').addClass('active');
                // Add sidebar
                $('#blog_sidebar_insert').load('templates/blog-sidebar.html');
                // Load post
                FillBlogPost();
            });
            $('#footer_sitemap').load('templates/footer-sitemap.html');
        });
    </script>

    <!-- Blog Post Global List -->
    <script src="templates/blog/blog-post-list.js"></script>

    <!-- Find the Blog post and fill in info -->
    <script>
        // Find post
        var FillBlogPost = function () {
            
            var cancelLoad = false;

            // Find if there are params in url
            var queryParam = window.location.href;
            var argIndex = queryParam.indexOf('?') + 1;
            var postIndex = -1;

            // Try to load page
            if (argIndex - 1 >= 0 &&
                (postIndex = window.location.href.slice(argIndex).indexOf('post=')) >= 0) {
                // Find param of 'post' (project name)
                var postQuery = window.location.href.slice(argIndex).slice(postIndex + 5);

                // Find the post query (inside minidb)
                var postFound = false;
                for (i = 0; i < globalBlogPostList.length; i++) {
                    if (postQuery === globalBlogPostList[i][4]) {
                        postFound = true;
                        break;
                    }
                }

                // If the post query isn't null...
                if (postFound) {
                    cancelLoad = true;

                    // Find project metadata
                    var postTitle = '';
                    var postAuthor = '';
                    var postTimeStamp = '';
                    var postImg = '';
                    var postDesc = '';

                    for (var i = 0; i < globalBlogPostList.length; i++) {
                        // Find matching 'post'
                        console.log('post: ' + postQuery + "; gpl_sku: " + globalBlogPostList[i][4]);
                        if (postQuery === globalBlogPostList[i][4]) {
                            postTitle = globalBlogPostList[i][0];
                            postAuthor = globalBlogPostList[i][1];
                            postTimeStamp = globalBlogPostList[i][2];
                            postImg = globalBlogPostList[i][3];
                            postDesc = globalBlogPostList[i][5];
                            break;
                        }
                    }

                    document.title = 'Posts | ' + postTitle;
                    document.getElementById('bread_active').innerHTML = postTitle.trim();
                    document.getElementById('post_title').innerHTML = postTitle.trim() + '&nbsp;<small>by ' + postAuthor.trim() + '</small>';

                    document.getElementById('blog_timestamp').innerHTML = '<i class="fa fa-clock-o"></i> Posted on ' + postTimeStamp;

                    var blog_image = document.getElementById('blog_img_import');
                    blog_image.src = postImg;
                    blog_image.alt = postTitle;

                    // Load the project
                    $('#blog_content_import').load('templates/blog/' + postQuery + '/body.html');
                    console.log(document.getElementById('blog_content_import'));

                    // Add OpenGraph tags (for FB)
                    document.getElementById('head_tag').innerHTML +=
                        '<meta property="og:url" content="' + window.location.href + '" />' +
                        '<meta property="og:type" content="website" />' +
	                    '<meta property="og:title" content="' + postTitle + '" />' +
	                    '<meta property="og:description" content="' + postDesc + '" />' +
	                    '<meta property="og:image" content="' + postImg + '" />';

                    // Add Comments & like button
                    document.getElementById('fb_like_insert').innerHTML = '<div class="fb-like" data-href="' + window.location.href + '" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div>';
                    document.getElementById('fb_comments_insert').innerHTML = '<div class="fb-comments" data-href="' + window.location.href + '" data-width="100%" data-numposts="5"></div>';
                }
            }

            // Redirect to blog home if no data was loaded
            if (!cancelLoad) {
                // Redirect to blog home
                window.location = "blog-home.html";
            }
        }
    </script>

    <!-- Facebook SDK -->
    <div id="fb-root"></div>
    <script>
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>

</body>

</html>
